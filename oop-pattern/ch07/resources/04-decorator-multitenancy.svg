<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentScriptType="application/ecmascript" contentStyleType="text/css" height="281px" preserveAspectRatio="none" style="width:630px;height:281px;" version="1.1" viewBox="0 0 630 281" width="630px" zoomAndPan="magnify"><defs><filter height="300%" id="felzs1ij82yjj" width="300%" x="-1" y="-1"><feGaussianBlur result="blurOut" stdDeviation="2.0"/><feColorMatrix in="blurOut" result="blurOut2" type="matrix" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 .4 0"/><feOffset dx="4.0" dy="4.0" in="blurOut2" result="blurOut3"/><feBlend in="SourceGraphic" in2="blurOut3" mode="normal"/></filter></defs><g><!--MD5=[d33fab4f4e47f6755ec4a784a349482d]
cluster catalog.application.datasource--><polygon fill="#FFFFFF" filter="url(#felzs1ij82yjj)" points="159.5,6,406.5,6,413.5,28.2969,505.5,28.2969,505.5,140,159.5,140,159.5,6" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="159.5" x2="413.5" y1="28.2969" y2="28.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="241" x="163.5" y="20.9951">catalog.application.datasource</text><!--MD5=[cceb8093370687bc0ab603f55e7304d0]
cluster catalog.repository.datasource--><polygon fill="#FFFFFF" filter="url(#felzs1ij82yjj)" points="67.5,165,311.5,165,318.5,187.2969,613.5,187.2969,613.5,274,67.5,274,67.5,165" style="stroke:#000000;stroke-width:1.5;"/><line style="stroke:#000000;stroke-width:1.5;" x1="67.5" x2="318.5" y1="187.2969" y2="187.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacingAndGlyphs" textLength="238" x="71.5" y="179.9951">catalog.repository.datasource</text><!--MD5=[7146ea4075dcb7b7a722bd1145e921ae]
class TenantDataSourceProvider--><rect codeLine="6" fill="#FEFECE" filter="url(#felzs1ij82yjj)" height="99.2188" id="TenantDataSourceProvider" style="stroke:#A80036;stroke-width:1.5;" width="330" x="167.5" y="33"/><ellipse cx="243.75" cy="49" fill="#B4A7E5" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M239.6719,44.7656 L239.6719,42.6094 L247.0625,42.6094 L247.0625,44.7656 L244.5938,44.7656 L244.5938,52.8438 L247.0625,52.8438 L247.0625,55 L239.6719,55 L239.6719,52.8438 L242.1406,52.8438 L242.1406,44.7656 L239.6719,44.7656 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" font-style="italic" lengthAdjust="spacingAndGlyphs" textLength="169" x="264.25" y="53.1543">TenantDataSourceProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="168.5" x2="496.5" y1="65" y2="65"/><line style="stroke:#A80036;stroke-width:1.5;" x1="168.5" x2="496.5" y1="73" y2="73"/><ellipse cx="178.5" cy="84" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="253" x="187.5" y="87.2104">save(TenantDataSource): TenantDataSource</text><ellipse cx="178.5" cy="96.8047" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="193" x="187.5" y="100.0151">findAll(): List&lt;TenantDataSource&gt;</text><ellipse cx="178.5" cy="109.6094" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="304" x="187.5" y="112.8198">findByTenantId(String): Optional&lt;TenantDataSource&gt;</text><ellipse cx="178.5" cy="122.4141" fill="#84BE84" rx="3" ry="3" style="stroke:#038048;stroke-width:1.0;"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="165" x="187.5" y="125.6245">getTenantList(): List&lt;String&gt;</text><!--MD5=[86e4a2e56f605fff1b9464836f5885f3]
class CacheableTenentDataSourceProvider--><rect codeLine="15" fill="#FEFECE" filter="url(#felzs1ij82yjj)" height="73.6094" id="CacheableTenentDataSourceProvider" style="stroke:#A80036;stroke-width:1.5;" width="267" x="76" y="192"/><ellipse cx="91" cy="208" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M93.9688,213.6406 Q93.3906,213.9375 92.75,214.0781 Q92.1094,214.2344 91.4063,214.2344 Q88.9063,214.2344 87.5781,212.5938 Q86.2656,210.9375 86.2656,207.8125 Q86.2656,204.6875 87.5781,203.0313 Q88.9063,201.375 91.4063,201.375 Q92.1094,201.375 92.75,201.5313 Q93.4063,201.6875 93.9688,201.9844 L93.9688,204.7031 Q93.3438,204.125 92.75,203.8594 Q92.1563,203.5781 91.5313,203.5781 Q90.1875,203.5781 89.5,204.6563 Q88.8125,205.7188 88.8125,207.8125 Q88.8125,209.9063 89.5,210.9844 Q90.1875,212.0469 91.5313,212.0469 Q92.1563,212.0469 92.75,211.7813 Q93.3438,211.5 93.9688,210.9219 L93.9688,213.6406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="235" x="105" y="212.1543">CacheableTenentDataSourceProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="77" x2="342" y1="224" y2="224"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="84" y="232"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="76" x="96" y="238.2104">cache: Cache</text><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="84" y="244.8047"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="209" x="96" y="251.0151">delegate: TenentDataSourceProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="77" x2="342" y1="257.6094" y2="257.6094"/><!--MD5=[0fe9fe2d0db46e4f963c3af398b53593]
class JdbcTenantDataSourceProvider--><rect codeLine="20" fill="#FEFECE" filter="url(#felzs1ij82yjj)" height="60.8047" id="JdbcTenantDataSourceProvider" style="stroke:#A80036;stroke-width:1.5;" width="227" x="378" y="198.5"/><ellipse cx="393" cy="214.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M395.9688,220.1406 Q395.3906,220.4375 394.75,220.5781 Q394.1094,220.7344 393.4063,220.7344 Q390.9063,220.7344 389.5781,219.0938 Q388.2656,217.4375 388.2656,214.3125 Q388.2656,211.1875 389.5781,209.5313 Q390.9063,207.875 393.4063,207.875 Q394.1094,207.875 394.75,208.0313 Q395.4063,208.1875 395.9688,208.4844 L395.9688,211.2031 Q395.3438,210.625 394.75,210.3594 Q394.1563,210.0781 393.5313,210.0781 Q392.1875,210.0781 391.5,211.1563 Q390.8125,212.2188 390.8125,214.3125 Q390.8125,216.4063 391.5,217.4844 Q392.1875,218.5469 393.5313,218.5469 Q394.1563,218.5469 394.75,218.2813 Q395.3438,218 395.9688,217.4219 L395.9688,220.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="195" x="407" y="218.6543">JdbcTenantDataSourceProvider</text><line style="stroke:#A80036;stroke-width:1.5;" x1="379" x2="604" y1="230.5" y2="230.5"/><rect fill="none" height="6" style="stroke:#C82930;stroke-width:1.0;" width="6" x="386" y="238.5"/><text fill="#000000" font-family="sans-serif" font-size="11" lengthAdjust="spacingAndGlyphs" textLength="160" x="398" y="244.7104">jdbcTemplate: JdbcTemplate</text><line style="stroke:#A80036;stroke-width:1.5;" x1="379" x2="604" y1="251.3047" y2="251.3047"/><!--MD5=[86bcde81ce3a3cf3fe35441fbcc51141]
class CatalogService--><rect codeLine="3" fill="#FEFECE" filter="url(#felzs1ij82yjj)" height="48" id="CatalogService" style="stroke:#A80036;stroke-width:1.5;" width="125" x="7" y="58.5"/><ellipse cx="22" cy="74.5" fill="#ADD1B2" rx="11" ry="11" style="stroke:#A80036;stroke-width:1.0;"/><path d="M24.9688,80.1406 Q24.3906,80.4375 23.75,80.5781 Q23.1094,80.7344 22.4063,80.7344 Q19.9063,80.7344 18.5781,79.0938 Q17.2656,77.4375 17.2656,74.3125 Q17.2656,71.1875 18.5781,69.5313 Q19.9063,67.875 22.4063,67.875 Q23.1094,67.875 23.75,68.0313 Q24.4063,68.1875 24.9688,68.4844 L24.9688,71.2031 Q24.3438,70.625 23.75,70.3594 Q23.1563,70.0781 22.5313,70.0781 Q21.1875,70.0781 20.5,71.1563 Q19.8125,72.2188 19.8125,74.3125 Q19.8125,76.4063 20.5,77.4844 Q21.1875,78.5469 22.5313,78.5469 Q23.1563,78.5469 23.75,78.2813 Q24.3438,78 24.9688,77.4219 L24.9688,80.1406 Z " fill="#000000"/><text fill="#000000" font-family="sans-serif" font-size="12" lengthAdjust="spacingAndGlyphs" textLength="93" x="36" y="78.6543">CatalogService</text><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="131" y1="90.5" y2="90.5"/><line style="stroke:#A80036;stroke-width:1.5;" x1="8" x2="131" y1="98.5" y2="98.5"/><!--MD5=[163914a5d6e2765d13e7be5c1034d5c7]
reverse link TenantDataSourceProvider to CacheableTenentDataSourceProvider--><path d="M255.25,152.0982 C255.25,152.0982 255.25,191.9609 255.25,191.9609 " fill="none" id="TenantDataSourceProvider-backto-CacheableTenentDataSourceProvider" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="248.2501,152.0983,255.25,132.0982,262.2501,152.0982,248.2501,152.0983" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[59313781dcec8482d954fd8c9a119ca7]
reverse link TenantDataSourceProvider to JdbcTenantDataSourceProvider--><path d="M437.75,152.0982 C437.75,152.0982 437.75,198.2442 437.75,198.2442 " fill="none" id="TenantDataSourceProvider-backto-JdbcTenantDataSourceProvider" style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:7.0,7.0;"/><polygon fill="none" points="430.7501,152.0983,437.75,132.0982,444.7501,152.0982,430.7501,152.0983" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[af6afbc4ad6983842930c0a2fe0ba718]
link CatalogService to TenantDataSourceProvider--><path codeLine="25" d="M132.1609,83 C132.1609,83 162.4238,83 162.4238,83 " fill="none" id="CatalogService-to-TenantDataSourceProvider" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="167.4238,83,158.4238,79,162.4238,83,158.4238,87,167.4238,83" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[03c2d840262ec80da6b55e421005a076]
link CacheableTenentDataSourceProvider to JdbcTenantDataSourceProvider--><path codeLine="26" d="M343.0675,229 C343.0675,229 372.9712,229 372.9712,229 " fill="none" id="CacheableTenentDataSourceProvider-to-JdbcTenantDataSourceProvider" style="stroke:#A80036;stroke-width:1.0;"/><polygon fill="#A80036" points="377.9712,229,368.9712,225,372.9712,229,368.9712,233,377.9712,229" style="stroke:#A80036;stroke-width:1.0;"/><!--MD5=[7897a4a5251cbd5dfff02a8859c9beb8]
@startuml
skinparam linetype ortho

class CatalogService {}

package catalog.application.datasource {
  interface TenantDataSourceProvider {
    + save(TenantDataSource): TenantDataSource
    + findAll(): List<TenantDataSource>
    + findByTenantId(String): Optional<TenantDataSource>
    + getTenantList(): List<String>
  }
}

package catalog.repository.datasource {
  class CacheableTenentDataSourceProvider implements TenantDataSourceProvider {
    - cache: Cache
    - delegate: TenentDataSourceProvider
  }
  
  class JdbcTenantDataSourceProvider implements TenantDataSourceProvider {
    - jdbcTemplate: JdbcTemplate
  }
}

CatalogService -> TenantDataSourceProvider
CacheableTenentDataSourceProvider -> JdbcTenantDataSourceProvider
@enduml

PlantUML version 1.2020.22(Sun Dec 06 09:36:27 UTC 2020)
(GPL source distribution)
Java Runtime: OpenJDK Runtime Environment
JVM: OpenJDK 64-Bit Server VM
Default Encoding: UTF-8
Language: en
Country: US
--></g></svg>